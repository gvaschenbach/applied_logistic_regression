, levels = c( 0, 1 )
, labels = c( 'No fracture', 'Has fracture' )
)
, PO2 = factor( PO2
, levels = c( 0, 1 )
, labels = c( 'PO2 > 60', 'PO2 <= 60' )
)
, PH = factor( PH
, levels = c( 0, 1 )
, labels = c( 'PH >= 7.25', 'PH < 7.25' )
)
, PCO = factor( PCO
, levels = c( 0, 1 )
, labels = c( 'PCO2 <= 45', 'PCO2 > 45' )
)
, BIC = factor( BIC
, levels = c( 0, 1 )
, labels = c( 'Bicarb >= 18', 'Bicarb < 18' )
)
, CRE = factor( CRE
, levels = c( 0, 1 )
, labels = c( 'Creatinine <= 2.0', 'Creatinine > 2.0' )
)
, LOC = factor( LOC
, levels = c( 0, 1, 2 )
, labels = c( 'No coma or DS', 'Deep stupor', 'Coma' )
)
)
names(df)
df <- transform( df
, ID = ID
, STA = factor( STA
, levels = c( 0, 1 )
, labels = c( 'Died', 'Lived' ) )
, AGE = AGE
, GENDER = factor( GENDER
, levels = c( 0, 1 )
, labels = c( 'Male', 'Female' ) )
, RACE = factor( RACE
, levels = c( 1, 2, 3 )
, labels = c( 'White', 'Black', 'Other' ) )
, SER = factor( SER
, levels = c( 0, 1 )
, labels = c( 'Medical', 'Surgical' ) )
, CAN = factor( CAN
, levels = c( 0, 1 )
, labels = c( 'Cancer not present', 'Cancer present' )
)
, CRN = factor( CRN
, levels = c( 0, 1 )
, labels = c( 'No hx of CRF', 'Has h of CRF' )
)
, INF = factor( INF
, levels = c( 0, 1 )
, labels = c( 'No infection at admission', 'Probable infection at admission' )
)
, CPR = factor( CPR
, levels = c( 0, 1 )
, labels = c( 'No CPR given', 'CPR given' )
)
, SYS = SYS
, HRA = HRA
, PRE = factor( PRE
, levels = c( 0, 1 )
, labels = c( 'No prev ICU adx', 'Has prev ICU adx' )
)
, TYP = factor( TYP
, levels = c( 0, 1 )
, labels = c( 'Elective', 'Emergency' )
)
, FRA = factor( FRA
, levels = c( 0, 1 )
, labels = c( 'No fracture', 'Has fracture' )
)
, PO2 = factor( PO2
, levels = c( 0, 1 )
, labels = c( 'PO2 > 60', 'PO2 <= 60' )
)
, PH = factor( PH
, levels = c( 0, 1 )
, labels = c( 'PH >= 7.25', 'PH < 7.25' )
)
, PCO = factor( PCO
, levels = c( 0, 1 )
, labels = c( 'PCO2 <= 45', 'PCO2 > 45' )
)
, BIC = factor( BIC
, levels = c( 0, 1 )
, labels = c( 'Bicarb >= 18', 'Bicarb < 18' )
)
, CRE = factor( CRE
, levels = c( 0, 1 )
, labels = c( 'Creatinine <= 2.0', 'Creatinine > 2.0' )
)
, LOC = factor( LOC
, levels = c( 0, 1, 2 )
, labels = c( 'No coma or DS', 'Deep stupor', 'Coma' )
)
)
str(df)
head(df)
df <- read.delim('../data/ICU.txt')
df <- transform( df
, ID = ID
, STA = factor( STA
, levels = c( 0, 1 )
, labels = c( 'Died', 'Lived' ) )
, AGE = AGE
, GENDER = factor( GENDER
, levels = c( 0, 1 )
, labels = c( 'Male', 'Female' ) )
, RACE = factor( RACE
, levels = c( 1, 2, 3 )
, labels = c( 'White', 'Black', 'Other' ) )
, SER = factor( SER
, levels = c( 0, 1 )
, labels = c( 'Medical', 'Surgical' ) )
, CAN = factor( CAN
, levels = c( 0, 1 )
, labels = c( 'Cancer not present', 'Cancer present' )
)
, CRN = factor( CRN
, levels = c( 0, 1 )
, labels = c( 'No hx of CRF', 'Has h of CRF' )
)
, INF = factor( INF
, levels = c( 0, 1 )
, labels = c( 'No infection at admission', 'Probable infection at admission' )
)
, CPR = factor( CPR
, levels = c( 0, 1 )
, labels = c( 'No CPR given', 'CPR given' )
)
, SYS = SYS
, HRA = HRA
, PRE = factor( PRE
, levels = c( 0, 1 )
, labels = c( 'No prev ICU adx', 'Has prev ICU adx' )
)
, TYP = factor( TYP
, levels = c( 0, 1 )
, labels = c( 'Elective', 'Emergency' )
)
, FRA = factor( FRA
, levels = c( 0, 1 )
, labels = c( 'No fracture', 'Has fracture' )
)
, PO2 = factor( PO2
, levels = c( 0, 1 )
, labels = c( 'PO2 > 60', 'PO2 <= 60' )
)
, PH = factor( PH
, levels = c( 0, 1 )
, labels = c( 'PH >= 7.25', 'PH < 7.25' )
)
, PCO = factor( PCO
, levels = c( 0, 1 )
, labels = c( 'PCO2 <= 45', 'PCO2 > 45' )
)
, BIC = factor( BIC
, levels = c( 0, 1 )
, labels = c( 'Bicarb >= 18', 'Bicarb < 18' )
)
, CRE = factor( CRE
, levels = c( 0, 1 )
, labels = c( 'Creatinine <= 2.0', 'Creatinine > 2.0' )
)
, LOC = factor( LOC
, levels = c( 0, 1, 2 )
, labels = c( 'No coma or DS', 'Deep stupor', 'Coma' )
)
)
str(df)
icu.age.fit <- glm( STA
~ AGE
, data = df
, family = 'binomial' )
summary( icu.age.fit )
icu.age.fit <- glm( STA
~ AGE
+ CAN
, data = df
, family = 'binomial' )
summary( icu.age.fit )
icu.age.fit <- glm( STA
~ CAN
, data = df
, family = 'binomial' )
summary( icu.age.fit )
names(df)
icu.age.fit <- glm( STA
~ AGE
+ GENDER
, data = df
, family = 'binomial' )
summary( icu.age.fit )
icu.age.fit <- glm( STA
~ AGE
+ RACE
, data = df
, family = 'binomial' )
summary( icu.age.fit )
icu.age.fit <- glm( STA
~ AGE
+ INF
, data = df
, family = 'binomial' )
summary( icu.age.fit )
icu.age.fit <- glm( STA
~ INF
, data = df
, family = 'binomial' )
summary( icu.age.fit )
icu.age.fit <- glm( STA
~ INF
+ AGE
, data = df
, family = 'binomial' )
summary( icu.age.fit )
icu.age.fit <- glm( STA
~ AGE
+ INF
, data = df
, family = 'binomial' )
summary( icu.age.fit )
df <- read.delim('../data/raw/LOWBWT/LOWBWT.txt')
df <- read.delim('../data/raw/LOWBWT/LOWBWT.txt')
df <- transform( df
, ID = ID
, LOW = factor( LOW
, levels = c( 0, 1 )
, labels = c( '>= 2500g', '< 2500g' )
)
, AGE = AGE
, LWT = LWT
, RACE = factor( RACE
, levels = c( 1, 2, 3 )
, labels = c( 'White', 'Black', 'Other' )
)
, SMOKE = factor( SMOKE
, levels = c( 0, 1 )
, labels = c( 'Didn''t smoke', 'Did smoke' )
df <- transform( df
, ID = ID
, LOW = factor( LOW
, levels = c( 0, 1 )
, labels = c( '>= 2500g', '< 2500g' )
)
, AGE = AGE
, LWT = LWT
, RACE = factor( RACE
, levels = c( 1, 2, 3 )
, labels = c( 'White', 'Black', 'Other' )
)
, SMOKE = factor( SMOKE
, levels = c( 0, 1 )
, labels = c( 'Didn\'t smoke', 'Did smoke' )
)
, PTL = factor( PTL
, levels = c( 0, 1 )
, labels = c( 'No prematurity', 'Prematurity' )
)
, HT = factor( HT
, levels = c( 0, 1 )
, labels = c( 'No hx of hypertension', 'Hx of hypertension' )
)
, UI = factor( UI
, levels = c( 0, 1 )
, labels = c( 'No uterine irritability', 'Has uterine irritability' )
)
, FTV = factor( FTV
, levels = c( 0, 1, 2 )
, labels = c( 'No visits', 'One visit', 'Two or more visits' )
)
, BWT = BWT
)
str(df)
df <- read.delim('data/raw/GLOW/GLOW_BONEMED.txt')
str(df)
df <- transform( df
, SUB_ID = factor( SUB_ID )
, SITE_ID = factor( SITE_ID )
, PHY_ID = factor( PHy_ID )
, PRIORFAC = factor( PRIORFAC
, levels = c( 0, 1 )
, labels = c( 'No prior fx', 'Has prior fx' )
)
, AGE = AGE
, WEIGHT = WEIGHT
, HEIGHT = HEIGHT
, BMI = BMI
, PREMENO = factor( PREMENO
, levels = c( 0, 1 )
, labels = c( 'No menopause before 45yo', 'Menopause before 45yo' )
)
, MOMFRAC = factor( MOMFRAC
, levels = c( 0, 1 )
, labels = c( 'No mother hip fx', 'Has mother hip fx' )
)
, ARMASSIST = factor( ARMASSIST
, levels = c( 0, 1 )
, labels = c( 'Arms not needed', 'Arms needed' )
)
, SMOKE = factor( SMOKE
, levels = c( 0, 1 )
, labels = c( 'No hx of smoking', 'Has hx of smoking' )
)
, RATERISK = factor( RATERISK
, levels = c( 1, 2, 3 )
, labels = c( 'Less than others', 'Same as others', 'Greater than others' )
)
, FRACSCORE = FRACSCORE
, FRACTURE = FRACTURE
)
df <- transform( df
, SUB_ID = factor( SUB_ID )
, SITE_ID = factor( SITE_ID )
, PHY_ID = factor( PHY_ID )
, PRIORFAC = factor( PRIORFAC
, levels = c( 0, 1 )
, labels = c( 'No prior fx', 'Has prior fx' )
)
, AGE = AGE
, WEIGHT = WEIGHT
, HEIGHT = HEIGHT
, BMI = BMI
, PREMENO = factor( PREMENO
, levels = c( 0, 1 )
, labels = c( 'No menopause before 45yo', 'Menopause before 45yo' )
)
, MOMFRAC = factor( MOMFRAC
, levels = c( 0, 1 )
, labels = c( 'No mother hip fx', 'Has mother hip fx' )
)
, ARMASSIST = factor( ARMASSIST
, levels = c( 0, 1 )
, labels = c( 'Arms not needed', 'Arms needed' )
)
, SMOKE = factor( SMOKE
, levels = c( 0, 1 )
, labels = c( 'No hx of smoking', 'Has hx of smoking' )
)
, RATERISK = factor( RATERISK
, levels = c( 1, 2, 3 )
, labels = c( 'Less than others', 'Same as others', 'Greater than others' )
)
, FRACSCORE = FRACSCORE
, FRACTURE = FRACTURE
)
df <- transform( df
, SUB_ID = factor( SUB_ID )
, SITE_ID = factor( SITE_ID )
, PHY_ID = factor( PHY_ID )
, PRIORFRAC = factor( PRIORFRAC
, levels = c( 0, 1 )
, labels = c( 'No prior fx', 'Has prior fx' )
)
, AGE = AGE
, WEIGHT = WEIGHT
, HEIGHT = HEIGHT
, BMI = BMI
, PREMENO = factor( PREMENO
, levels = c( 0, 1 )
, labels = c( 'No menopause before 45yo', 'Menopause before 45yo' )
)
, MOMFRAC = factor( MOMFRAC
, levels = c( 0, 1 )
, labels = c( 'No mother hip fx', 'Has mother hip fx' )
)
, ARMASSIST = factor( ARMASSIST
, levels = c( 0, 1 )
, labels = c( 'Arms not needed', 'Arms needed' )
)
, SMOKE = factor( SMOKE
, levels = c( 0, 1 )
, labels = c( 'No hx of smoking', 'Has hx of smoking' )
)
, RATERISK = factor( RATERISK
, levels = c( 1, 2, 3 )
, labels = c( 'Less than others', 'Same as others', 'Greater than others' )
)
, FRACSCORE = FRACSCORE
, FRACTURE = FRACTURE
)
str(df)
df <- transform( df
, SUB_ID = factor( SUB_ID )
, SITE_ID = factor( SITE_ID )
, PHY_ID = factor( PHY_ID )
, PRIORFRAC = factor( PRIORFRAC
, levels = c( 0, 1 )
, labels = c( 'No prior fx', 'Has prior fx' )
)
, AGE = AGE
, WEIGHT = WEIGHT
, HEIGHT = HEIGHT
, BMI = BMI
, PREMENO = factor( PREMENO
, levels = c( 0, 1 )
, labels = c( 'No menopause before 45yo', 'Menopause before 45yo' )
)
, MOMFRAC = factor( MOMFRAC
, levels = c( 0, 1 )
, labels = c( 'No mother hip fx', 'Has mother hip fx' )
)
, ARMASSIST = factor( ARMASSIST
, levels = c( 0, 1 )
, labels = c( 'Arms not needed', 'Arms needed' )
)
, SMOKE = factor( SMOKE
, levels = c( 0, 1 )
, labels = c( 'No hx of smoking', 'Has hx of smoking' )
)
, RATERISK = factor( RATERISK
, levels = c( 1, 2, 3 )
, labels = c( 'Less than others', 'Same as others', 'Greater than others' )
)
, FRACSCORE = FRACSCORE
, FRACTURE = factor( FRACTURE
, levels = c( 0, 1 )
, labels = c( 'No fx in first year', 'Has fx in first year' )
)
)
df <- read.delim( 'data/raw/GLOW/GLOW_RAND.txt' )
df <- read.delim( '../data/raw/GLOW/GLOW_RAND.txt' )
df <- transform( df
, SUB_ID = factor( SUB_ID )
, SITE_ID = factor( SITE_ID )
, PHY_ID = factor( PHY_ID )
, PRIORFRAC = factor( PRIORFRAC
, levels = c( 0, 1 )
, labels = c( 'No prior fx', 'Has prior fx' )
)
, AGE = AGE
, WEIGHT = WEIGHT
, HEIGHT = HEIGHT
, BMI = BMI
, PREMENO = factor( PREMENO
, levels = c( 0, 1 )
, labels = c( 'No menopause before 45yo', 'Menopause before 45yo' )
)
, MOMFRAC = factor( MOMFRAC
, levels = c( 0, 1 )
, labels = c( 'No mother hip fx', 'Has mother hip fx' )
)
, ARMASSIST = factor( ARMASSIST
, levels = c( 0, 1 )
, labels = c( 'Arms not needed', 'Arms needed' )
)
, SMOKE = factor( SMOKE
, levels = c( 0, 1 )
, labels = c( 'No hx of smoking', 'Has hx of smoking' )
)
, RATERISK = factor( RATERISK
, levels = c( 1, 2, 3 )
, labels = c( 'Less than others', 'Same as others', 'Greater than others' )
)
, FRACSCORE = FRACSCORE
, FRACTURE = factor( FRACTURE
, levels = c( 0, 1 )
, labels = c( 'No fx in first year', 'Has fx in first year' )
)
)
summary(glm(df$FRACTURE ~ df$AGE, family = binomial()))
exp(coef(glm(df$FRACTURE ~ df$AGE, family = binomial())))
exp(confint(glm(df$FRACTURE ~ df$AGE, family = binomial())))
summary(glm(df$FRACTURE ~ df$AGE + df$PRIORFRAC, family = binomial()))
summary(glm(df$FRACTURE ~ df$MOMFRAC, family = binomial()))
summary(lm(df$FRACTURE ~ df$MOMFRAC ) )
?lm
df <- read.delim( '../data/raw/GLOW/GLOW55.txt' )
df <- read.delim( '../data/raw/GLOW/GLOW500.txt' )
df <- transform( df
, SUB_ID = factor( SUB_ID )
, SITE_ID = factor( SITE_ID )
, PHY_ID = factor( PHY_ID )
, PRIORFRAC = factor( PRIORFRAC
, levels = c( 0, 1 )
, labels = c( 'No prior fx', 'Has prior fx' )
)
, AGE = AGE
, WEIGHT = WEIGHT
, HEIGHT = HEIGHT
, BMI = BMI
, PREMENO = factor( PREMENO
, levels = c( 0, 1 )
, labels = c( 'No menopause before 45yo', 'Menopause before 45yo' )
)
, MOMFRAC = factor( MOMFRAC
, levels = c( 0, 1 )
, labels = c( 'No mother hip fx', 'Has mother hip fx' )
)
, ARMASSIST = factor( ARMASSIST
, levels = c( 0, 1 )
, labels = c( 'Arms not needed', 'Arms needed' )
)
, SMOKE = factor( SMOKE
, levels = c( 0, 1 )
, labels = c( 'No hx of smoking', 'Has hx of smoking' )
)
, RATERISK = factor( RATERISK
, levels = c( 1, 2, 3 )
, labels = c( 'Less than others', 'Same as others', 'Greater than others' )
)
, FRACSCORE = FRACSCORE
, FRACTURE = factor( FRACTURE
, levels = c( 0, 1 )
, labels = c( 'No fx in first year', 'Has fx in first year' )
)
)
summary(glm(df$FRACTURE ~ df$AGE + df$PRIORFRAC, family = binomial()))
exp( coef(glm(df$FRACTURE ~ df$AGE + df$PRIORFRAC, family = binomial())) )
